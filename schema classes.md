# Схема проекта

### Регистрация аккаунта
##### 1. Не авторизованный пользватель заполняет форму регистрации
##### 2. Валидация формы
##### 2.1 Показ ошибок на форме
##### 3 Успешная валидация и запись в таблицу:
* `tf_users`
---

### Создание новой задачи

##### 1. Авторизованный пользователь и роль заказчик
##### 2. Заполнение формы на странице «Добавление задания»
##### 3. Валидация формы
##### 3.1 Показ ошибок на форме
##### 4 Успешная валидация и запись в таблицу:
* `tf_tasks`
##### Взаимосвязь с таблицами:
* `tf_cities`
* `category_id`
* `tf_users`
* `tf_task_attachments`
---

### Отмена задачи

##### 1. Авторизованный пользователь
##### 2. Роль пользователя "заказчик"
##### 3. Является автором задачи
##### 4. Отмена заданий со статусом «На исполнении» невозможна
##### 5. Запись в таблицу:
* `tf_tasks`
##### Взаимосвязь с таблицами:
* `tf_users`

---
### Отклик на задачу

##### 1. Авторизованный пользователь
##### 2. Роль пользователя "исполнитель"
##### 3. Не откликался ранее на эту задачу
##### 4. Валидация формы
##### 4.1 Показ ошибок на форме
##### 5. Успешная валидация и запись в таблицу:
* `tf_responses`
##### Взаимосвязь с таблицами:
* `tf_tasks`
* `tf_users`
##### 6. Отправка уведомления "Новый отклик к заданию"

---
### Старт задачи

##### 1. Авторизованный пользователь
##### 2. Роль пользователя "заказчик"
##### 3. Выбирает из списка откликов
##### 4. Смена статуса и запись в таблицу:
* `tf_tasks`
##### Взаимосвязь с таблицами:
* `tf_users`
##### 5. Отправка уведомления "Старт задания"

---
### Отказ от задачи

##### 1. Авторизованный пользователь
##### 2. Является исполнителем этой задачи
##### 3. Нажал на кнопку "Отказаться" в модальном окне
##### 4. Увеличили счетчик проваленных заданий
##### 4. Изменили статус задачи на `Провалено`
##### 5. Запись в таблицу:
* `tf_responses`
##### Взаимосвязь с таблицами:
* `tf_tasks`
* `tf_users`
##### 6. Отправка уведомления "Отказ от задания исполнителем"

---
### Завершение задачи

##### 1. Авторизованный пользователь
##### 2. Роль пользователя "заказчик"
##### 3. Является автором задачи
##### 4. Валидация формы
##### 4.1 Показ ошибок на форме
##### 5. Успешная валидация и смена статуса задачи:
* `с Выполнено на Завершено`
* `с Возникли проблемы на Провалено`
##### 6 Запись в таблицу:
* `tf_feedback`
##### Взаимосвязь с таблицами:
* `tf_tasks`
* `tf_users`
##### 7. Отправка уведомления "Завершение задания"

---
### Работа в чате

##### 1. Авторизованный пользователь
##### 2. Пишет сообщение в чате на странице задачи
##### 3. Проверка что поле заполнено и id получателя существует в БД
##### 4. Сохранение сообщения в таблицу задачи:
* `tf_messages`
##### Взаимосвязь с таблицами:
* `tf_users`
##### 5. Отправка уведомления "Новое сообщение в чате"

---
### Настройка профиля пользователя

##### 1. Авторизованный пользователь
##### 2. Добавляет/изменяет информацию в настройках аккаунта
##### 3. Проверка на валидацию
##### 3.1 Показ ошибок на форме
##### 4. Успешная валидация и запись в БД:
* `tf_users`
##### Взаимосвязь с таблицами:
* `tf_user_categories`
* `tf_user_attachments`
* `tf_user_preferences`
